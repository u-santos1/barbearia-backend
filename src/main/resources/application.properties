# ==========================================================
# BANCO DE DADOS (PostgreSQL na Railway)
# ==========================================================
spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}
spring.datasource.username=${PGUSER}
spring.datasource.password=${PGPASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pooling (Hikari) - Ajustado para o plano Gratuito/Starter
# Mantém poucas conexões para não estourar a memória da Railway
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000

# ==========================================================
# JPA / HIBERNATE (Comportamento das Tabelas)
# ==========================================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ?? MUITO IMPORTANTE: 'update' mantém os dados e só altera a estrutura se necessário.
# Nunca use 'create' ou 'create-drop' em produção!
spring.jpa.hibernate.ddl-auto=update

spring.jpa.generate-ddl=true
spring.jpa.show-sql=false
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.format_sql=false

# ==========================================================
# SEGURANÇA (JWT)
# ==========================================================
# Não deixe fixo no código. Defina a variável JWT_SECRET na Railway.
api.security.token.secret=${JWT_SECRET:MinhaSenhaPadraoMuitoForte123456}

# ==========================================================
# INTEGRAÇÕES E CONFIGURAÇÕES
# ==========================================================
# Defina MP_ACCESS_TOKEN na Railway
mercadopago.access_token=${MP_ACCESS_TOKEN}

# Defina FRONTEND_URL na Railway (ex: https://barber-pro-front.vercel.app)
# Usado para configurar o CORS
api.cors.allowed-origins=${FRONTEND_URL:*}

# ==========================================================
# LOGS
# ==========================================================
logging.level.root=INFO
logging.level.org.hibernate=ERROR
logging.level.agendamentoDeClienteBarbearia=INFO